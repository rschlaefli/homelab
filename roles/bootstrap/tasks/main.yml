- name: Update APT package cache
  apt:
    update_cache: yes
    cache_valid_time: 3600

- name: Upgrade all installed APT packages (in safe mode)
  apt:
    upgrade: safe

- name: Install basic system management packages
  apt:
    name: "{{ packages }}"
    state: latest
  vars:
    packages:
      - nano
      - htop
      - tmux
      - build-essential

- name: Install exFAT dependencies
  apt:
    name: "{{ packages }}"
    state: latest
  vars:
    packages:
      - exfat-fuse
      - exfat-utils

- name: Install the nemo file explorer
  apt:
    name: nemo
    state: latest

- name: Install the tilix terminal
  apt:
    name: tilix
    state: latest

- name: Install UFW GUI
  apt:
    name: gufw
    state: latest

- include_tasks: undervolt.yml
  when: cpu_uv is defined and gpu_uv is defined
